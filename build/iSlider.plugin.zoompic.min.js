!function(t){"use strict";function e(t,e,a,r){return"translate"+(z?"3d(":"(")+t+"px,"+e+(z?"px,"+a+"px)":"px)")+"scale("+r+")"}function a(t,e){var a,r;return a=t.left-e.left,r=t.top-e.top,Math.sqrt(a*a+r*r)}function r(t,e){return t+"px "+e+"px"}function n(t){return Array.prototype.slice.call(t).map(function(t){return{left:t.pageX,top:t.pageY}})}function s(t,e){var r=a(t[0],t[1]),n=a(e[0],e[1]);return n/r}function i(e){var a={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,offsetX:0,offsetY:0},r=0,n=0;if(!t.getComputedStyle||!e)return a;var s,i,l=t.getComputedStyle(e);s=l.webkitTransform||l.mozTransform,i=l.webkitTransformOrigin||l.mozTransformOrigin;var o=i.match(/(.*)px\s+(.*)px/);if(o.length>1&&(r=o[1]-0,n=o[2]-0),"none"==s)return a;var f=s.match(/^matrix3d\((.+)\)$/),c=s.match(/^matrix\((.+)\)$/);if(f){var p=f[1].split(", ");a={translateX:p[12]-0,translateY:p[13]-0,translateZ:p[14]-0,offsetX:r-0,offsetY:n-0,scaleX:p[0]-0,scaleY:p[5]-0,scaleZ:p[10]-0}}else if(c){var p=c[1].split(", ");a={translateX:p[4]-0,translateY:p[5]-0,offsetX:r-0,offsetY:n-0,scaleX:p[0]-0,scaleY:p[3]-0}}return a}function l(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function o(t){T=1,y=t.zoomFactor||2}function f(t){H.call(this,t);var e=this.els[1].querySelector("img:first-child"),a=this.deviceEvents;if(a.hasTouch&&null!==e){E=!0;var s=i(e);x=n(t.targetTouches),b=s.translateX-0,k=s.translateY-0,T=s.scaleX,Y=e;var o=g(e);if(2==t.targetTouches.length){w=null;var f=t.touches,c=l({x:f[0].pageX,y:f[0].pageY},{x:f[1].pageX,y:f[1].pageY});e.style.webkitTransformOrigin=r(c.x-o.left,c.y-o.top)}else if(1===t.targetTouches.length){var p=(new Date).getTime();S=0,300>p-w&&(t.preventDefault(),S=3),w=p}}}function c(t){if(E){var e=0,a=Y,r=this.deviceEvents;if(r.hasTouch&&(2===t.targetTouches.length?(a.style.webkitTransitionDuration="0",t.preventDefault(),u(t),e=2):1===t.targetTouches.length&&T>1&&(a.style.webkitTransitionDuration="0",t.preventDefault(),d.call(this,t),e=1),S=e,e>0))return}W.call(this,t)}function p(t){var a=a||2,n=Y,s=g(n);T=1==T?a:1,n.style.webkitTransform=e(0,0,0,T),1!=T&&(n.style.webkitTransformOrigin=r(t.touches[0].pageX-s.left,t.touches[0].pageY-s.top))}function u(t){var a=n(t.targetTouches),r=s(x,a),i=Y;r=C>T*r?C:T*r,i.style.webkitTransform=e(0,0,0,r)}function h(t){if(E){var e=0;if(2===S?(m(t),e=2):1==S?(m(t),e=1):3===S&&(p(t),m(t),E=!1),e>0)return}D.call(this,t)}function d(t){var a=Y,r=this.deviceEvents,n={X:r.hasTouch?t.targetTouches[0].pageX-this.startX:t.pageX-this.startX,Y:r.hasTouch?t.targetTouches[0].pageY-this.startY:t.pageY-this.startY},s={x:b+n.X-0,y:k+n.Y-0};a.style.webkitTransform=e(s.x,s.y,0,T)}function g(t){var e={left:0,top:0};do e.top+=t.offsetTop||0,e.left+=t.offsetLeft||0,t=t.offsetParent;while(t);return e}function v(t,e,a){var r,n,s=g(t);O={start:{left:s.left,top:s.top},end:{left:s.left+t.clientWidth,top:s.top+t.clientHeight}};var i=1==a?"left":"top";return r=O.start[i],n=O.end[i],e>=r&&n>=e}function X(t,e){var a=0,r=v(t,e.start.left,1),n=v(t,e.end.left,1),s=v(t,e.start.top,0),i=v(t,e.end.top,0);return r!=n&&s!=i?a=r&&i?1:r&&s?2:n&&i?3:4:r==n?!s&&i?a=5:!i&&s&&(a=6):s==i?!r&&n?a=7:r&&!n&&(a=8):s==i==r==n&&(a=9),a}function m(){if(1!=T){var t,a,r,n,s,l,o,f,c,p,u=Y;switch(r=i(u),c=u.parentNode,n=u.clientWidth*r.scaleX,s=u.clientHeight*r.scaleX,l=g(u),o={left:(1-r.scaleX)*r.offsetX+l.left+r.translateX,top:(1-r.scaleX)*r.offsetY+l.top+r.translateY},f={left:o.left+n,top:o.top+s},t=o.left,a=o.top,p=X(c,{start:o,end:f})){case 1:t=O.start.left,a=O.end.top-s;break;case 2:t=O.start.left,a=O.start.top;break;case 3:t=O.end.left-n,a=O.end.top-s;break;case 4:t=O.end.left-n,a=O.start.top;break;case 5:a=O.end.top-s;break;case 6:a=O.start.top;break;case 7:t=O.end.left-n;break;case 8:t=O.start.left}n<c.clientWidth&&(t=l.left-(r.scaleX-1)*u.clientWidth/2),s<c.clientHeight&&(a=l.top-(r.scaleX-1)*u.clientHeight/2),u.style.webkitTransitionDuration="100ms",u.style.webkitTransform=e(r.translateX+t-o.left,r.translateY+a-o.top,0,r.scaleX)}}var T,y,Y,x,b,k,w,S,H=iSlider.prototype.startHandler,D=iSlider.prototype.endHandler,W=iSlider.prototype.moveHandler,z="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,C=.5,O={},E=!1;t.iSlider.extend({startHandler:f,moveHandler:c,endHandler:h}),t.iSlider&&t.iSlider.regPlugin("zoompic",o)}(this);